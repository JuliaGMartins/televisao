{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { auth, db, firebase } from \"./firebase\";\nimport { signInWithEmailAndPassword, createUserWithEmailAndPassword } from \"firebase/auth\";\nimport { collection, getDocs, updateDoc, doc, query, where } from 'firebase/firestore';\nexport var loginAuth = function () {\n  var _ref = _asyncToGenerator(function* (email, password) {\n    try {\n      yield signInWithEmailAndPassword(auth, email, password);\n      return getUser();\n    } catch (error) {\n      if (error.code === \"auth/user-not-found\") {\n        return \"User does not exist.\";\n      }\n      if (error.code === \"auth/wrong-password\") {\n        return \"Wrong password.\";\n      }\n      if (error.code === \"auth/invalid-email\") {\n        return \"Invalid email.\";\n      }\n      return error.message;\n    }\n  });\n  return function loginAuth(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar getUser = function () {\n  var _ref2 = _asyncToGenerator(function* () {\n    var users = [];\n    var user = auth.currentUser;\n    var uid = user.uid;\n    var usersRef = collection(db, \"Users\");\n    var acceptedQuery = query(usersRef, where(\"id\", \"==\", uid));\n    var querySnapshot = yield getDocs(acceptedQuery);\n    querySnapshot.forEach(function (u) {\n      return users.push({\n        'data': u.data()\n      });\n    });\n  });\n  return function getUser() {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar createUser = function () {\n  var _ref3 = _asyncToGenerator(function* (email, password, firstName, lastName, navigation) {\n    createUserWithEmailAndPassword(auth, email, password).then(function (response) {\n      var uid = response.user.uid;\n      var data = {\n        id: uid,\n        email: email,\n        firstName: firstName,\n        lastName: lastName\n      };\n    }).catch(function (error) {\n      console.log(error);\n      setEmailError(true);\n      setTimeout(function () {\n        setEmailError(false);\n      }, 5000);\n    });\n  });\n  return function createUser(_x3, _x4, _x5, _x6, _x7) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nexport default {\n  loginAuth: loginAuth,\n  createUser: createUser\n};","map":{"version":3,"names":["auth","db","firebase","signInWithEmailAndPassword","createUserWithEmailAndPassword","collection","getDocs","updateDoc","doc","query","where","loginAuth","_ref","_asyncToGenerator","email","password","getUser","error","code","message","_x","_x2","apply","arguments","_ref2","users","user","currentUser","uid","usersRef","acceptedQuery","querySnapshot","forEach","u","push","data","createUser","_ref3","firstName","lastName","navigation","then","response","id","catch","console","log","setEmailError","setTimeout","_x3","_x4","_x5","_x6","_x7"],"sources":["/home/juliagm/televisao/src/Config/firebaseAuth.js"],"sourcesContent":["import { auth, db, firebase } from \"./firebase\";\nimport {  signInWithEmailAndPassword,\n          createUserWithEmailAndPassword\n} from \"firebase/auth\";\nimport { collection, getDocs, updateDoc, doc,  query, where} from 'firebase/firestore';\n\nexport const loginAuth = async (email, password) => {\n  try{\n    await signInWithEmailAndPassword(\n      auth, \n      email, \n      password\n    );\n    return getUser();\n  } catch (error){\n    if(error.code === \"auth/user-not-found\"){\n      return \"User does not exist.\";\n    }\n    if(error.code === \"auth/wrong-password\"){\n      return \"Wrong password.\";\n    }\n    if(error.code === \"auth/invalid-email\"){\n      return \"Invalid email.\";\n    }\n    return error.message;\n  }\n}\n\nconst getUser = async () => {\n  let users = [];\n  let user = auth.currentUser;\n  let uid = user.uid;\n  let usersRef = collection(db, \"Users\");\n  let acceptedQuery = query(usersRef, where(\"id\", \"==\", uid));\n  \n  let querySnapshot = await getDocs(acceptedQuery);\n  querySnapshot.forEach(u => {\n    return users.push({'data': u.data()}); \n  });\n}\n\nconst createUser = async (email, password, firstName, lastName, navigation) => {\n  createUserWithEmailAndPassword(auth, email, password)\n    .then((response) => {\n      const uid = response.user.uid;\n      const data = {\n        id: uid,\n        email,\n        firstName,\n        lastName,\n      };\n    })\n    .catch((error) => {\n      console.log(error)\n      setEmailError(true);\n      setTimeout(() => {\n        setEmailError(false);\n      }, 5000);\n    });\n};\n\nexport default { loginAuth, createUser };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}